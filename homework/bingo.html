<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<script>

window.onload=function(){
    const stt = document.getElementById("start");
    stt.addEventListener("click", draw);

}

const fruit=[
'수박','사과','귤','참외','토마토', 
'키위', '감', '배', '포도','무화과',
'석류','대추','망고','유자','자두',
'딸기','복숭아','바나나','멜론','라임',
'구아바','홍옥','용과','페피노','체리',
'레몬','자몽','살구','파파야','코코넛',
'홍시','복분자','머루','잣','밤',
'낑깡','한라봉','두꾸','산딸기','뱀딸기',
'앵두','레드향','신고','람부탄','두리안',
'으름','거봉','여주','만다린','모과'];


let num_box = new Array();

var out="";

let score=0;

var row_one=true;
var row_two=true;
var row_three=true;
var row_four=true;
var row_five=true;

var col_one=true;
var col_two=true;
var col_three=true;
var col_four=true;
var col_five=true;

var dia_one=true;
var dia_two=true;

var out_two="";

function draw(){
    var s_bd = document.getElementById("score_board");
    s_bd.innerHTML="";
    
    //빙고판
    out="";
    out+="<table>";
    out+="<tr>";
    for(var j=0; j<5; j++){
        for(var i=0; i<5; i++){
            var temp = Math.floor(Math.random()*50)+1;
            if(num_box.indexOf(temp)==-1){
                num_box.push(temp);
                out+="<td class='pre_box tds'>"+fruit[temp-1]+"</td>";
            }else{
                i--
            }
        }
        out+="</tr>";
    }
    out+="</table>";

    //하단
    out+="<table>";
    out+="<tr>";
    for(var j=0; j<2; j++){
        for(var i=0; i<25; i++){
            out+="<td class='tdds'>"+fruit[j*25+i]+"</td>";
        }
        out+="</tr>";
    }
    out+="</table>";


    document.getElementById("board").innerHTML=out;
    num_box=[];

    var bin = document.getElementsByClassName("tds")
    for(var i=0; i<bin.length; i++){
        bin[i].addEventListener("click", choice);
    }

    var biin = document.getElementsByClassName("tdds")
    for(var i=0; i<biin.length; i++){
        biin[i].addEventListener("click", red);
    }
}

function red(){
    this.style.background="red";
}

function choice(){

    // this.removeEventListener("click", choice); // 중복 클릭 방지
    this.classList.toggle("after_box");
    var bin = document.getElementsByClassName("tds");
    var s_bd = document.getElementById("score_board");
    var tdds = document.getElementsByClassName("tdds");

    for(var j=0; j<50; j++){
        if (tdds[j].textContent === this.textContent){
            tdds[j].style.background="red";
        }
    }
    


    // 가로줄
    if( row_one &&
        bin[0].classList.item(2)===bin[1].classList.item(2)&&
        bin[1].classList.item(2)===bin[2].classList.item(2)&&
        bin[2].classList.item(2)===bin[3].classList.item(2)&&
        bin[3].classList.item(2)===bin[4].classList.item(2)&&
        bin[0].classList.item(2)!=null){
            alert("가로줄 bingo!");
            row_one=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( row_two &&
        bin[5].classList.item(2)===bin[6].classList.item(2)&&
        bin[6].classList.item(2)===bin[7].classList.item(2)&&
        bin[7].classList.item(2)===bin[8].classList.item(2)&&
        bin[8].classList.item(2)===bin[9].classList.item(2)&&
        bin[5].classList.item(2)!=null){
            alert("가로줄 bingo!");
            row_two=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( row_three &&
        bin[10].classList.item(2)===bin[11].classList.item(2)&&
        bin[11].classList.item(2)===bin[12].classList.item(2)&&
        bin[12].classList.item(2)===bin[13].classList.item(2)&&
        bin[13].classList.item(2)===bin[14].classList.item(2)&&
        bin[10].classList.item(2)!=null){
            alert("가로줄 bingo!");
            row_three=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( row_four &&
        bin[15].classList.item(2)===bin[16].classList.item(2)&&
        bin[16].classList.item(2)===bin[17].classList.item(2)&&
        bin[17].classList.item(2)===bin[18].classList.item(2)&&
        bin[18].classList.item(2)===bin[19].classList.item(2)&&
        bin[15].classList.item(2)!=null){
            alert("가로줄 bingo!");
            row_four=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( row_five &&
        bin[20].classList.item(2)===bin[21].classList.item(2)&&
        bin[21].classList.item(2)===bin[22].classList.item(2)&&
        bin[22].classList.item(2)===bin[23].classList.item(2)&&
        bin[23].classList.item(2)===bin[24].classList.item(2)&&
        bin[20].classList.item(2)!=null){
            alert("가로줄 bingo!");
            row_five=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    // 세로줄
    if( col_one &&
        bin[0].classList.item(2)===bin[5].classList.item(2)&&
        bin[5].classList.item(2)===bin[10].classList.item(2)&&
        bin[10].classList.item(2)===bin[15].classList.item(2)&&
        bin[15].classList.item(2)===bin[20].classList.item(2)&&
        bin[0].classList.item(2)!=null){
            alert("세로줄 bingo!");
            col_one=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( col_two &&
        bin[1].classList.item(2)===bin[6].classList.item(2)&&
        bin[6].classList.item(2)===bin[11].classList.item(2)&&
        bin[11].classList.item(2)===bin[16].classList.item(2)&&
        bin[16].classList.item(2)===bin[21].classList.item(2)&&
        bin[1].classList.item(2)!=null){
            alert("세로줄 bingo!");
            col_two=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( col_three &&
        bin[2].classList.item(2)===bin[7].classList.item(2)&&
        bin[7].classList.item(2)===bin[12].classList.item(2)&&
        bin[12].classList.item(2)===bin[17].classList.item(2)&&
        bin[17].classList.item(2)===bin[22].classList.item(2)&&
        bin[2].classList.item(2)!=null){
            alert("세로줄 bingo!");
            col_three=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( col_four &&
        bin[3].classList.item(2)===bin[8].classList.item(2)&&
        bin[8].classList.item(2)===bin[13].classList.item(2)&&
        bin[13].classList.item(2)===bin[18].classList.item(2)&&
        bin[18].classList.item(2)===bin[23].classList.item(2)&&
        bin[3].classList.item(2)!=null){
            alert("세로줄 bingo!");
            col_four=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( col_five &&
        bin[4].classList.item(2)===bin[9].classList.item(2)&&
        bin[9].classList.item(2)===bin[14].classList.item(2)&&
        bin[14].classList.item(2)===bin[19].classList.item(2)&&
        bin[19].classList.item(2)===bin[24].classList.item(2)&&
        bin[4].classList.item(2)!=null){
            alert("세로줄 bingo!");
            col_five=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }


    // 대각선
    if( dia_one &&
        bin[0].classList.item(2)===bin[6].classList.item(2)&&
        bin[6].classList.item(2)===bin[12].classList.item(2)&&
        bin[12].classList.item(2)===bin[18].classList.item(2)&&
        bin[18].classList.item(2)===bin[24].classList.item(2)&&
        bin[0].classList.item(2)!=null){
            alert("대각선 bingo!");
            dia_one=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    if( dia_two &&
        bin[4].classList.item(2)===bin[8].classList.item(2)&&
        bin[8].classList.item(2)===bin[12].classList.item(2)&&
        bin[12].classList.item(2)===bin[16].classList.item(2)&&
        bin[16].classList.item(2)===bin[20].classList.item(2)&&
        bin[4].classList.item(2)!=null){
            alert("대각선 bingo!");
            dia_two=false;
            score++;
            s_bd.innerHTML=score+"빙고!";
    }

    // 올 빙고
    if(score==12){
        var s_bd = document.getElementById("score_board");
        s_bd.innerHTML="ALL BINGO!";
        score=0;
        row_one=true;
        row_two=true;
        row_three=true;
        row_four=true;
        row_five=true;

        col_one=true;
        col_two=true;
        col_three=true;
        col_four=true;
        col_five=true;

        dia_one=true;
        dia_two=true;
        var bin = document.getElementsByClassName("tds")
        for(var i=0; i<bin.length; i++){
            bin[i].removeEventListener("click", choice);
        }
    }
}

</script>

<style>
#wrap{
    display:flex;
    flex-direction: column;
    align-items: center;
}

#start{
    margin-bottom: 20px;
    width:200px;
    height:50px;
    font-weight: 700;
}

table{
    border-collapse: collapse;
    margin:30px auto;
}
.pre_box{
    width:80px; height:80px;
    border:1px solid black;
    text-align:center;
    font-size:25px;
    font-weight:500;
    background:white;
}
.pre_box:hover{
    cursor:pointer;
}
.after_box{
    border:none;
    width:80px; height:80px;
    background: paleturquoise;
    color:white;
    text-align:center;
    font-size:25px;
    font-weight:500;
}

#score_board{
    margin-top:20px;
    font-size:30px;
}

.tdds{
    border:1px solid black;
    width:50px; height:50px;
    font-size:10px;
    text-align: center;
    background:white;
}


</style>

</head>
<body>

    <div id="wrap">
        <button id="start">게임시작</button>
        <div id="board"></div>
        <div id="score_board"></div>
        <div id="all"></div>
    </div>
    
</body>
</html>