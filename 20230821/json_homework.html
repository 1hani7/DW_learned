<!--json_homework.html-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<!--jquery-->
<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
<!--css-->
<link rel="stylesheet" href="./static/css/my_init.css">
</head>
<body>
    <div class="mar-center-2 width-60 flex-col-between gap-1
                border-black border-1px border-solid pad-1">
        <div>
            <input type="date" name="date" id="date"
                   class="border-black border-1px border-solid radius-2 pad-hr-1" />
        </div>
        <div class="flex gap-3 mar-top-1">
            <div><input type="radio" name="weather" id="weather" value="맑음" /> 맑음</div>
            <div><input type="radio" name="weather" id="weather" value="흐림" /> 흐림</div>
            <div><input type="radio" name="weather" id="weather" value="천둥" /> 천둥</div>
        </div>
    </div>
    <table class="mar-center-2 width-60">
        <thead class="border-black-all border-solid-all border-1px-all">
            <th class="pad-vr-half">작성일</th> <th>제목</th> <th>날씨</th> <th>내용</th>
        </thead>
        <tbody id="diary">

        </tbody>
    </table>
</body>
</html>

<script>
    /*
        날짜로 검색 가능하게 - input date
        날씨로 검색 가능하게 - 날씨는 맑음, 흐림, 천둥 중 하나만 선택 가능 (라디오)
        선택하면 해당 날씨만 표시
    */

    let data = [];

    async function getData(){
        var temp = await fetch("./data/test4.json").then(r=>r.json()).then(r=>r);
        return temp.diary;
    }


    $(async function(){
        data = await getData();

        $.each(data,function(i,v){
            $("#diary").append(
                "<tr class='list border-black-all border-solid-all border-1px-all pad-half-all'><td>"+
                v.작성일+"</td><td>"+v.제목+
                "</td><td>"+v.날씨+
                "</td><td>"+v.내용+
                "</td></tr>"
            )
        });

        $(".list").filter(function(i){
            return i%2==0;
        }).css("background","var(--red200)");

        $("input[name=date]").change(function(){
            var v = $(this).val().split("-").join("");
            $(".list").filter(function(){
                var isShow = $(this).text().indexOf(v) > -1;
                $(this).toggle(isShow);
            });
        });

        $("input[name=weather]").change(function(){
            var v = $("input[name=weather]:checked").val();
            $(".list").filter(function(){
                var isShow = $(this).text().indexOf(v) > -1;
                $(this).toggle(isShow);
            });
        });
    });



</script>